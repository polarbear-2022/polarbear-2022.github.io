"use strict";var wikisummary=new function(){this.config=new function(){this.language="en",this.image=!0,this.title=!1,this.titles=!1,this.size="default",this.theme="default",this.arrow=!0,this.animation="scale",this.duration=200,this.delay=[0,0],this.onshow=!1,this.onshown=!1,this.onhide=!1,this.onhidden=!1,this.distance=15,this.maxwidth="300px",this.arrowtransform="scale(2)",this.element=function(i){return window["wikisummary-element"]={},$.each(wikisummary.config,function(t,n){if(typeof $(i).data(t)!=typeof wikisummary_undefined)switch(t){case"titles":case"delay":window["wikisummary-element"][t]=$(i).data(t).split(",");break;default:window["wikisummary-element"][t]=$(i).data(t)}else window["wikisummary-element"][t]=window.wikisummary.config[t]}),window["wikisummary-element"]}},this.init=function(i){i=typeof i!=typeof ytp_undefined&&i,window.wikisummary_attributes=i,typeof window.wikisummary_attributes.config!=typeof ytp_undefined&&$.each(wikisummary.config,function(i,t){typeof window.wikisummary_attributes.config[i]!=typeof ytp_undefined&&(window.wikisummary.config[i]=window.wikisummary_attributes.config[i])}),delete window.wikisummary_attributes,$.each($(".wikisummary"),function(){var i=this,t=wikisummary.config.element(i);$(i).hasClass("wikisummary-loaded")||($(i).addClass("wikisummary-theme-"+t.theme),$(i).addClass("wikisummary-loaded"),!1!==t.title?wikisummary.load(i):!1!==t.titles?($(i).removeClass("wikisummary"),$.each(t.titles,function(){var t=$(i).html();t=t.replace(new RegExp(this,"gi"),function(i){return"<span class='wikisummary'>"+i+"</span>"}),$(i).html(t)}),$.each($(i).find(".wikisummary"),function(){$(this).data("title",$(this).html());var i=this;$.each(t,function(t,n){"titles"!=t&&"title"!=t&&("delay"==t?$(i).data(t,n[0]+","+n[1]):$(i).data(t,n))}),wikisummary.load(this)})):""!=$(i).html()&&($(i).data("title",$(i).html()),wikisummary.load(i)))})},this.load=function(i){var t=wikisummary.config.element(i);$.getJSON("https://"+t.language+".wikipedia.org/w/api.php?format=json&action=query&prop=extracts&exintro=&explaintext=&origin=*&titles="+encodeURI(t.title),function(n){var e=wikisummary.ID();$.each(n.query.pages,function(i,t){$("<div />",{id:"wikisummary_"+e,class:"wikisummary-tooltip nano"}).append($("<div />",{class:"wikisummary-title"}).html(t.title)).append($("<div />",{class:"wikisummary-content nano"}).append($("<div />",{class:"nano-content"}).html(t.extract))).appendTo($(document.body))}),!0===t.image?$.getJSON("https://"+t.language+".wikipedia.org/w/api.php?action=query&titles="+encodeURI(t.title)+"&prop=pageimages&format=json&pithumbsize=600&origin=*",function(t){$.each(t.query.pages,function(i,t){typeof t.thumbnail!=typeof wikisummary_undefined&&$("<img />",{src:t.thumbnail.source}).insertBefore($("#wikisummary_"+e).find(".wikisummary-title"))}),wikisummary.tooltip(i,e)}):wikisummary.tooltip(i,e),$(i).addClass("wikisummary-loaded-text")})},this.tooltip=function(i,t){var n=wikisummary.config.element(i);tippy(i,{html:"#wikisummary_"+t,arrow:n.arrow,animation:n.animation,distance:n.distance,maxWidth:n.maxwidth,interactive:!0,arrowTransform:n.arrowtransform,theme:n.theme,duration:n.duration,delay:n.delay,size:n.size,onShow:function(){window.setTimeout(function(){$(".tippy-content").find(".nano-content").css("position","absolute").addClass("active"),$(".tippy-content").find(".nano").css("width",n.maxwidth+"px").nanoScroller()},150),!1!==n.onshow&&"function"==typeof window[n.onshow]&&window[n.onshow](i)},onShown:function(){!1!==n.onshown&&"function"==typeof window[n.onshown]&&window[n.onshown](i)},onHide:function(){!1!==n.onhide&&"function"==typeof window[n.onhide]&&window[n.onhide](i)},onHidden:function(){!1!==n.onhidden&&"function"==typeof window[n.onhidden]&&window[n.onhidden](i)}})},this.ID=function(){var i=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}};